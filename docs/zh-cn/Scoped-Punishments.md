
# 范围处罚

您可以利用服务器范围功能在群组服（如BungeeCord或Velocity）的部分后端服务器进行处罚。

比如，您可能需要把一个开战斗外挂的玩家在PvP服务器中封禁；但是，他们苦苦相求，最终说服您允许他在另一个后端服务器玩创造模式。

范围配置通过`scope.yml`文件管理。

## 指南

LibertyBans提供了3种范围类型：
1. 全局范围，对所有服务器生效。
2. 单服务器范围。
3. 类别范围，对一组服务器生效。

### 服务器名称

服务器名称是单服务器范围的识别符。它和您在代理端配置文件（BungeeCord的`config.yml`，或Velocity的`velocity.toml`）中设置的名称相同。

一般情况下，后端服务器能够自动检测到属于它们的服务器名称（通过一个名为插件通信的技术手段）。不过，如果自动检测功能无法满足您的需求，您可以覆盖服务器名称。

在代理端上，LibertyBans总是能知道每个后端服务器的名字。代理端*自身*也可以被手动命名，不过单代理端的处罚的使用范围非常有限。

### 类别

类别可以对每个服务器进行配置。只需写出服务器所术语的类别即可。

## 命令

您可以在命令中使用`-server=<服务器名称>`指定一个服务器、`-category=<类别名>`指定一个类别、或`-scope=<范围参数>`指定任意范围来使用范围功能。

对于`-scope=<范围参数>`，范围参数必须是`server:<server>`、`category:<category>`或`\*`中的一种，其中`\*`表示全局范围。比如说，`-scope=category:pvp`就是一个有效的参数。

### 处罚命令

如果没有指定范围，处罚命令将使用配置指定的默认范围。您可以将其改为当前服务器，这样即可默认只对当前服务器进行处罚。

### 列表命令

列表命令，如/banlist、/history等，默认会包括所有范围的处罚。指定一个范围将会筛选出针对该范围的处罚记录——严格来讲，这与*影响*该范围的处罚记录并**不**相同。比如说，`/banlist -scope=*`只会列出对全局范围的处罚，而不包括针对单服务器或类别的处罚。

### 示例

* /ban A248 -server=lobby 你在大厅里太吵了
* /mute A248 -category=clans 说客对于族群玩家来说还是太危险了
* /warn A248 -scope=* 7d 您完全可以在原因之前的任何地方填写-server、-category或-scope参数
* /kick A248 您知道范围踢出也能生效么？玩家只会在连接到指定的范围时被踢出

### 权限

出于兼容性考虑，默认情况下范围的权限节点被禁用。如果需要权限来控制范围功能的使用，请在配置中开启`require-scope-permissions`选项。

如果以上选项被启用：
* 管理员必须拥有`libertybans.scope.global`、`libertybans.scope.server.<服务器>`、或`libertybans.scope.category.<类别>`权限。
* 如果需要使用不指定范围的命令，必须为管理员授予`libertybans.scope.default`权限。否则管理员必须明确指定一个范围才能执行处罚。
